---
interface Props {
    title?: string;
    description?: string;
    ogImage?: string;
    canonical?: string;
    metadata?: {
        title?: string;
        description?: string;
        ogImage?: string;
        canonical?: string;
        ignoreTitleTemplate?: boolean;
    };
}

import Seo from "../components/seo/Seo.astro";
import Schema from "../components/seo/Schema.astro";
import Navbar from "../components/layout/Navbar.astro";
import Footer from "../components/layout/Footer.astro";
import "../styles/global.css";

import { siteConfig } from "../config/site";

const { title, description, ogImage, canonical, metadata } = Astro.props;

const finalTitle = metadata?.title || title;
const finalDescription = metadata?.description || description;
const finalOgImage = metadata?.ogImage || ogImage;
const finalCanonical = metadata?.canonical || canonical;
const finalIgnoreTitleTemplate = metadata?.ignoreTitleTemplate || false;
---

<!doctype html>
<html lang={siteConfig.lang} class="scroll-smooth">
    <head>
        <Seo
            title={finalTitle}
            description={finalDescription}
            ogImage={finalOgImage}
            canonical={finalCanonical}
            ignoreTitleTemplate={finalIgnoreTitleTemplate}
        />
        <Schema type="WebSite" data={{}} />
        <slot name="head" />

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@400;500;600;700;800&family=Manrope:wght@400;500;600;700;800&family=Geist:wght@400;500;600;700;800;900&display=swap"
            rel="stylesheet"
        />

        <!-- Plausible Analytics -->
        <script
            defer
            data-domain="bisrepetita.ch"
            src="https://plausible.io/js/script.js"></script>

        <style is:global>
            body {
                font-family: "Manrope", "Geist", system-ui, sans-serif;
            }
            h1, h2, h3, h4, h5, h6,
            .font-display,
            .font-heading {
                font-family: "Bricolage Grotesque", "Arial Narrow", sans-serif;
                letter-spacing: -0.04em;
            }
        </style>
    </head>
    <body
        class="bg-background text-foreground antialiased"
    >
        <a
            href="#main-content"
            class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 rounded-md bg-primary px-4 py-2 text-background shadow-lg"
        >
            Aller au contenu
        </a>

        <div class="relative flex min-h-screen flex-col overflow-x-hidden">
            <!-- Background Glow -->
            <div class="pointer-events-none fixed inset-0 z-0 hidden md:block">
                <div
                    class="absolute inset-0 bg-[radial-gradient(circle_at_top_left,rgba(212,168,83,0.06)_0%,transparent_50%)]"
                >
                </div>
                <div
                    class="absolute inset-0 bg-[radial-gradient(circle_at_bottom_right,rgba(212,168,83,0.04)_0%,transparent_50%)]"
                >
                </div>
            </div>

            <Navbar />
            <main id="main-content" class="relative z-10 grow">
                <slot />
            </main>
            <Footer />
        </div>
        <script>
            import { initGsapReveal } from "../utils/gsap";
            document.addEventListener("DOMContentLoaded", initGsapReveal);
            document.addEventListener("astro:page-load", initGsapReveal);
        </script>
    </body>
</html>

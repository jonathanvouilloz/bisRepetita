---
import { siteConfig } from "../../config/site";

interface Props {
    type: "WebSite" | "BlogPosting" | "SportsActivityLocation" | "Service" | "Person" | "FAQPage";
    data?: {
        title?: string;
        description?: string;
        image?: string;
        pubDate?: Date;
        author?: string;
        url?: string;
        faqs?: { question: string; answer: string }[];
    };
}

const { type, data = {} } = Astro.props;

let schema = {};

if (type === "WebSite") {
    schema = {
        "@context": "https://schema.org",
        "@type": "WebSite",
        name: siteConfig.name,
        url: siteConfig.url,
        description: siteConfig.description,
        inLanguage: "fr",
        author: {
            "@type": "Person",
            name: siteConfig.author,
        },
        sameAs: [
            siteConfig.socialLinks.instagram,
            siteConfig.socialLinks.linkedin,
        ],
    };
} else if (type === "BlogPosting") {
    schema = {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        headline: data.title,
        description: data.description,
        image: data.image,
        datePublished: data.pubDate,
        author: {
            "@type": "Person",
            name: data.author,
        },
        mainEntityOfPage: {
            "@type": "WebPage",
            "@id": data.url,
        },
        publisher: {
            "@type": "Organization",
            name: siteConfig.name,
            logo: {
                "@type": "ImageObject",
                url: new URL("/favicon.svg", siteConfig.url).toString(),
            },
        },
    };
} else if (type === "SportsActivityLocation") {
    schema = {
        "@context": "https://schema.org",
        "@type": "SportsActivityLocation",
        name: siteConfig.name,
        description: siteConfig.description,
        url: siteConfig.url,
        telephone: siteConfig.contact.phone,
        email: siteConfig.contact.email,
        ...(data?.image && { image: data.image }),
        address: {
            "@type": "PostalAddress",
            streetAddress: "La Voie-Creuse 16",
            addressLocality: "Genève",
            postalCode: "1202",
            addressCountry: "CH",
        },
        geo: {
            "@type": "GeoCoordinates",
            latitude: 46.22278,
            longitude: 6.14028,
        },
        openingHoursSpecification: [
            {
                "@type": "OpeningHoursSpecification",
                dayOfWeek: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                opens: "07:00",
                closes: "21:00",
            },
            {
                "@type": "OpeningHoursSpecification",
                dayOfWeek: "Saturday",
                opens: "09:00",
                closes: "17:00",
            },
        ],
        hasOfferCatalog: {
            "@type": "OfferCatalog",
            name: "Programmes de boxe",
            itemListElement: [
                {
                    "@type": "Offer",
                    itemOffered: {
                        "@type": "Service",
                        name: "Coaching Privé",
                        url: new URL("/services/coaching-prive", siteConfig.url).toString(),
                    },
                },
                {
                    "@type": "Offer",
                    itemOffered: {
                        "@type": "Service",
                        name: "Round by Round",
                        url: new URL("/services/round-by-round", siteConfig.url).toString(),
                    },
                },
                {
                    "@type": "Offer",
                    itemOffered: {
                        "@type": "Service",
                        name: "Programme Corporate",
                        url: new URL("/services/corporate", siteConfig.url).toString(),
                    },
                },
            ],
        },
        aggregateRating: {
            "@type": "AggregateRating",
            ratingValue: "4.8",
            bestRating: "5",
            ratingCount: "500",
        },
        sameAs: [
            siteConfig.socialLinks.instagram,
            siteConfig.socialLinks.linkedin,
        ],
        priceRange: "$$",
    };
} else if (type === "Service") {
    schema = {
        "@context": "https://schema.org",
        "@type": "Service",
        name: data.title,
        description: data.description,
        provider: {
            "@type": "SportsActivityLocation",
            name: siteConfig.name,
            url: siteConfig.url,
        },
        areaServed: {
            "@type": "City",
            name: "Geneve",
        },
    };
} else if (type === "Person") {
    schema = {
        "@context": "https://schema.org",
        "@type": "Person",
        name: data.title || siteConfig.author,
        description: data.description,
        jobTitle: "Head Coach & Fondateur",
        worksFor: {
            "@type": "SportsActivityLocation",
            name: siteConfig.name,
        },
    };
} else if (type === "FAQPage" && data.faqs) {
    schema = {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        mainEntity: data.faqs.map((faq) => ({
            "@type": "Question",
            name: faq.question,
            acceptedAnswer: {
                "@type": "Answer",
                text: faq.answer,
            },
        })),
    };
}
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
